<!--
SPDX-FileCopyrightText: Copyright (C) 2025 ARDUINO SA <http://www.arduino.cc>

SPDX-License-Identifier: MPL-2.0
-->

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>LED Matrix Painter</title>
  <link rel="icon" type="image/png" href="img/favicon.png"/>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
  <main>
    <div class="header">
        <div class="header-left">
            <img src="img/RGB-Arduino-Logo_Color Inline Loop.svg" alt="Arduino Logo" class="arduino-logo" />
            <p class="arduino-text">LED Matrix Painter</p>
        </div>
        <div class="header-right">
            <div class="switch-container">
                <label class="switch">
                    <input type="checkbox" id="code-panel-toggle" checked>
                    <span class="slider round"></span>
                </label>
                <label for="code-panel-toggle" class="switch-label">Code panel</label>
            </div>
            <span class="vertical-separator"></span>
            <button id="export"><img src="img/down-up.svg" alt="Export" style="width: 20px; height: 20px; padding-right: 8px; vertical-align: middle;">Export .h</button>
        </div>
    </div>
    <div class="main-content">
      <div class="left-sidebar">
        <div class="tools-box">
          <h3 class="box-title">Tools</h3>
          <div class="tool-controls">
            <div class="custom-select-wrapper">
              <div class="custom-select">
                <div class="custom-select__trigger">
                  <svg width="16" height="16" viewBox="0 0 32 32" class="tool-icon" style="vertical-align: middle;">
<path d="M27.3302 3.68976C24.2702 3.61975 19.9002 6.40973 14.3702 11.9697C12.4701 13.8798 11.0802 15.4898 10.6601 15.9797C8.11016 16.1898 6.09027 18.3298 6.09027 20.9298C6.09027 22.9598 5.20013 24.8597 3.65021 26.1498C3.35016 26.4097 3.22016 26.8098 3.33026 27.1898C3.44012 27.5698 3.76019 27.8497 4.15021 27.9097C4.73017 27.9898 5.32025 28.0397 5.90021 28.0397C7.52021 28.0397 9.11017 27.7197 10.5903 27.1097C12.0702 26.4998 13.4301 25.5997 14.5803 24.4498C15.4301 23.6097 15.9301 22.5198 16.0202 21.3398C16.2201 21.1697 16.6102 20.8298 17.1302 20.3698C17.8802 19.6998 18.9002 18.7498 20.0302 17.6298C25.5903 12.0997 28.3802 7.73975 28.3102 4.66974C28.3002 4.12976 27.8702 3.69977 27.3302 3.68976ZM13.1701 23.0397C11.3802 24.8298 8.97014 25.8798 6.47014 26.0198C7.51018 24.5498 8.09026 22.7798 8.09026 20.9298C8.09026 19.2897 9.4301 17.9598 11.0702 17.9598C11.8501 17.9598 12.6202 18.2798 13.1701 18.8298C13.7301 19.3898 14.0402 20.1398 14.0402 20.9298C14.0402 21.7298 13.7301 22.4697 13.1701 23.0397ZM15.6601 18.9998C15.4101 18.4097 15.0502 17.8698 14.5903 17.4097C14.1302 16.9598 13.5903 16.5997 12.9902 16.3497C13.5402 15.7397 14.3002 14.9097 15.2001 13.9797C15.7201 14.3798 16.2302 14.8098 16.7101 15.2897C17.1901 15.7698 17.6202 16.2798 18.0202 16.7997C17.0903 17.6898 16.2702 18.4498 15.6601 18.9998ZM19.4501 15.3798C19.0502 14.8597 18.6001 14.3597 18.1202 13.8798C17.6402 13.3998 17.1402 12.9498 16.6202 12.5497C20.5402 8.72973 23.8501 6.40973 26.1701 5.82977C25.5903 8.14978 23.2702 11.4598 19.4501 15.3798Z"/>
</svg>
                  <svg width="7" height="4" viewBox="0 0 7 4" class="dropdown-arrow" xmlns="http://www.w3.org/2000/svg">
<path d="M3.50205 4.00205C3.43624 4.00243 3.37101 3.98981 3.31009 3.96493C3.24917 3.94005 3.19377 3.90339 3.14705 3.85705L0.147046 0.857046C0.0528938 0.762894 0 0.635196 0 0.502046C0 0.368895 0.0528938 0.241197 0.147046 0.147046C0.241197 0.0528938 0.368895 0 0.502046 0C0.635196 0 0.762894 0.0528938 0.857046 0.147046L3.50205 2.79705L6.14705 0.147046C6.2412 0.0528938 6.36889 0 6.50205 0C6.6352 0 6.76289 0.0528938 6.85705 0.147046C6.9512 0.241197 7.00409 0.368895 7.00409 0.502046C7.00409 0.635196 6.9512 0.762894 6.85705 0.857046L3.85705 3.85705C3.81033 3.90339 3.75492 3.94005 3.694 3.96493C3.63308 3.98981 3.56785 4.00243 3.50205 4.00205Z" fill="#008184"/>
</svg>
                </div>
                <div class="custom-options">
                  <div class="custom-option" data-value="brush">
                    <svg width="16" height="16" viewBox="0 0 32 32" class="tool-icon" style="vertical-align: middle;">
<path d="M27.3302 3.68976C24.2702 3.61975 19.9002 6.40973 14.3702 11.9697C12.4701 13.8798 11.0802 15.4898 10.6601 15.9797C8.11016 16.1898 6.09027 18.3298 6.09027 20.9298C6.09027 22.9598 5.20013 24.8597 3.65021 26.1498C3.35016 26.4097 3.22016 26.8098 3.33026 27.1898C3.44012 27.5698 3.76019 27.8497 4.15021 27.9097C4.73017 27.9898 5.32025 28.0397 5.90021 28.0397C7.52021 28.0397 9.11017 27.7197 10.5903 27.1097C12.0702 26.4998 13.4301 25.5997 14.5803 24.4498C15.4301 23.6097 15.9301 22.5198 16.0202 21.3398C16.2201 21.1697 16.6102 20.8298 17.1302 20.3698C17.8802 19.6998 18.9002 18.7498 20.0302 17.6298C25.5903 12.0997 28.3802 7.73975 28.3102 4.66974C28.3002 4.12976 27.8702 3.69977 27.3302 3.68976ZM13.1701 23.0397C11.3802 24.8298 8.97014 25.8798 6.47014 26.0198C7.51018 24.5498 8.09026 22.7798 8.09026 20.9298C8.09026 19.2897 9.4301 17.9598 11.0702 17.9598C11.8501 17.9598 12.6202 18.2798 13.1701 18.8298C13.7301 19.3898 14.0402 20.1398 14.0402 20.9298C14.0402 21.7298 13.7301 22.4697 13.1701 23.0397ZM15.6601 18.9998C15.4101 18.4097 15.0502 17.8698 14.5903 17.4097C14.1302 16.9598 13.5903 16.5997 12.9902 16.3497C13.5402 15.7397 14.3002 14.9097 15.2001 13.9797C15.7201 14.3798 16.2302 14.8098 16.7101 15.2897C17.1901 15.7698 17.6202 16.2798 18.0202 16.7997C17.0903 17.6898 16.2702 18.4498 15.6601 18.9998ZM19.4501 15.3798C19.0502 14.8597 18.6001 14.3597 18.1202 13.8798C17.6402 13.3998 17.1402 12.9498 16.6202 12.5497C20.5402 8.72973 23.8501 6.40973 26.1701 5.82977C25.5903 8.14978 23.2702 11.4598 19.4501 15.3798Z"/>
</svg>
                  </div>
                  <div class="custom-option" data-value="eraser">
                    <svg width="16" height="16" viewBox="0 0 32 32" class="tool-icon" style="vertical-align: middle;">
<path d="M25,5 L7,23 L9,25 L27,7 L25,5 Z M5,25 L7,23 L9,25 L7,27 L5,25 Z"/>
</svg>
                  </div>
                </div>
              </div>
            </div>

            <div class="slider-container" style="flex-grow: 1; margin-left: 8px;">
              <div style="display: flex; justify-content: space-between;">
                <label for="brightness-alpha-slider" class="alpha-label">Brightness (Alpha)</label>
                <span id="brightness-alpha-value" class="alpha-label">7</span>
              </div>
              <div style="display: flex; align-items: center; gap: 8px;">
                <span class="slider-limit-label">0</span>
                <input type="range" id="brightness-alpha-slider" min="0" max="7" value="7" style="flex-grow: 1;">
                <span class="slider-limit-label">7</span>
              </div>
            </div>
          </div>
        </div>
        <div class="transform-box">
          <h3 class="box-title">Transform</h3>
          <div class="transform-buttons">
            <button id="flip-v" class="transform-btn"><img src="img/flip-v.svg" alt="Flip V" style="width: 12px; height: 12px; padding-right: 4px; vertical-align: middle;">Flip V</button>
            <button id="flip-h" class="transform-btn"><img src="img/flip-h.svg" alt="Flip H" style="width: 12px; height: 12px; padding-right: 4px; vertical-align: middle;">Flip H</button>
            <button id="rotate180" class="transform-btn"><img src="img/rotate.svg" alt="Rotate 180" style="width: 12px; height: 12px; padding-right: 4px; vertical-align: middle;">Rotate 180Â°</button>
            <button id="invert" class="transform-btn"><img src="img/invert.svg" alt="Invert" style="width: 12px; height: 12px; padding-right: 4px; vertical-align: middle;">Invert Matrix</button>
            <button id="invert-not-null" class="transform-btn"><img src="img/invert-draw.svg" alt="Invert Brightness" style="width: 12px; height: 12px; padding-right: 4px; vertical-align: middle;">Invert Draw</button>
          </div>
        </div>
      </div>

      <div class="center-content">
        <div class="center-content-header">
          <h3 class="box-title" id="frame-title">Frame 1</h3>
          <div class="frame-controls">
            <button id="clear" class="transform-btn"><img src="img/clear.svg" alt="Clear" style="width: 16px; height: 16px; padding-right: 4px; vertical-align: middle;">Clear Frame</button>
            <span class="vertical-separator"></span>
            <button id="frame-back" class="transform-btn"><img src="img/arrow-left.svg" alt="Back" style="width: 16px; height: 16px; vertical-align: middle;"></button>
            <button id="frame-forward" class="transform-btn"><img src="img/arrow-right.svg" alt="Forward" style="width: 16px; height: 16px; vertical-align: middle;"></button>
          </div>
        </div>
        <section class="maincol">
          <div id="grid" class="grid"></div>
          <div id="export-tools">
          </div>
        </section>
      </div>

      <div class="controls-section-right">
        <h3 class="box-title">Project code preview</h3>
        <pre id="vector" class="out"></pre>
      </div>
    </div>
  </main>
  <div class="frames-section-bottom">
    <div class="controls-section-left">
                <div class="sidebar-header">
                  <h3 style="margin:0;font-size:0.9rem;color:#666">Animation</h3>
                  <div class="anim-buttons">
                      <button id="play-animation" title="Play Animation"><img src="img/icon-play.svg" alt="Play"></button>
                      <button id="stop-animation" title="Stop Animation"><img src="img/icon-stop.svg" alt="Stop"></button>
                  </div>
                </div>
                          <div class="animation-controls-body">
                              <div class="animation-options">
                                <button id="copy-anim" class="anim-option-btn"><img src="img/copy.svg" alt="Copy"></button>
                                <button id="delete-anim" class="anim-option-btn"><img src="img/trash.svg" alt="Delete"></button>
                                <div class="separator"></div>
                                <button id="duration-anim" class="anim-option-btn"><img src="img/time.svg" alt="Duration"></button>
                              </div>
                              <div class="animation-controls-main">

                                  <div id="anim-controls">
                                    <input id="anim-name" placeholder="Animation name" />
                                  </div>
                                                    <!-- Frame name goes above the list of frames and below animation name (if present) -->
                                                    <div id="global-frame-inputs">
                                                      <input id="name" placeholder="Frame name (optional)" />
                                                      <input id="duration" type="number" min="0" step="10" value="1000" title="Duration in ms" />
                                                    </div>                                                                      <div id="frames" class="frames"></div>                                                </div>                          </div>    </div>
  </div>
  <div id="error-container" class="error-message" style="display: none;"></div>
  </div>

  <div id="duration-modal" class="modal">
    <div class="modal-content">
      <span class="close-button">&times;</span>
      <p class="modal-content-title">Set a duration to all frames</p>
      <p class="modal-content-p">This will replace individual frame settings</p>
      <input type="number" id="all-frames-duration" placeholder="Duration in ms" min="0" step="10">
      <button id="apply-duration">Apply</button>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>